<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>分页的设计过程 | lanchao-ui</title>
    <meta name="description" content="一个好用的UI框架">
    
    
    <link rel="preload" href="/lanchao-ui/assets/css/0.styles.52ec6c47.css" as="style"><link rel="preload" href="/lanchao-ui/assets/js/app.69a055d6.js" as="script"><link rel="preload" href="/lanchao-ui/assets/js/45.52a9c593.js" as="script"><link rel="prefetch" href="/lanchao-ui/assets/js/24.ba358318.js"><link rel="prefetch" href="/lanchao-ui/assets/js/1.efb98f79.js"><link rel="prefetch" href="/lanchao-ui/assets/js/2.6717d2fc.js"><link rel="prefetch" href="/lanchao-ui/assets/js/3.2115e5e5.js"><link rel="prefetch" href="/lanchao-ui/assets/js/5.c2d36d0e.js"><link rel="prefetch" href="/lanchao-ui/assets/js/6.f02fdbee.js"><link rel="prefetch" href="/lanchao-ui/assets/js/7.599dcd9b.js"><link rel="prefetch" href="/lanchao-ui/assets/js/8.a2da83e8.js"><link rel="prefetch" href="/lanchao-ui/assets/js/9.34582162.js"><link rel="prefetch" href="/lanchao-ui/assets/js/10.b173b931.js"><link rel="prefetch" href="/lanchao-ui/assets/js/11.873202f2.js"><link rel="prefetch" href="/lanchao-ui/assets/js/12.21df23dd.js"><link rel="prefetch" href="/lanchao-ui/assets/js/13.3c8bc27e.js"><link rel="prefetch" href="/lanchao-ui/assets/js/14.1980e6a6.js"><link rel="prefetch" href="/lanchao-ui/assets/js/15.212ab23e.js"><link rel="prefetch" href="/lanchao-ui/assets/js/16.ec25b92b.js"><link rel="prefetch" href="/lanchao-ui/assets/js/17.24795f58.js"><link rel="prefetch" href="/lanchao-ui/assets/js/18.cb835ac9.js"><link rel="prefetch" href="/lanchao-ui/assets/js/19.ea90d9d5.js"><link rel="prefetch" href="/lanchao-ui/assets/js/20.2b5cc8a9.js"><link rel="prefetch" href="/lanchao-ui/assets/js/21.2353702f.js"><link rel="prefetch" href="/lanchao-ui/assets/js/22.2bdcabab.js"><link rel="prefetch" href="/lanchao-ui/assets/js/23.9ba73719.js"><link rel="prefetch" href="/lanchao-ui/assets/js/25.5190ba9b.js"><link rel="prefetch" href="/lanchao-ui/assets/js/26.199afb2a.js"><link rel="prefetch" href="/lanchao-ui/assets/js/27.12e8d17f.js"><link rel="prefetch" href="/lanchao-ui/assets/js/28.fd34e1aa.js"><link rel="prefetch" href="/lanchao-ui/assets/js/29.bd294950.js"><link rel="prefetch" href="/lanchao-ui/assets/js/30.40f27e4e.js"><link rel="prefetch" href="/lanchao-ui/assets/js/31.fb48e5fb.js"><link rel="prefetch" href="/lanchao-ui/assets/js/32.3a7a730d.js"><link rel="prefetch" href="/lanchao-ui/assets/js/33.11ceaffc.js"><link rel="prefetch" href="/lanchao-ui/assets/js/34.faeeafe2.js"><link rel="prefetch" href="/lanchao-ui/assets/js/35.f6e1c4ae.js"><link rel="prefetch" href="/lanchao-ui/assets/js/36.f0466e38.js"><link rel="prefetch" href="/lanchao-ui/assets/js/37.10973720.js"><link rel="prefetch" href="/lanchao-ui/assets/js/38.acbd62e8.js"><link rel="prefetch" href="/lanchao-ui/assets/js/39.7e8eb723.js"><link rel="prefetch" href="/lanchao-ui/assets/js/40.e59e8da5.js"><link rel="prefetch" href="/lanchao-ui/assets/js/41.f660bf84.js"><link rel="prefetch" href="/lanchao-ui/assets/js/42.03214024.js"><link rel="prefetch" href="/lanchao-ui/assets/js/43.93b348b4.js"><link rel="prefetch" href="/lanchao-ui/assets/js/44.81317d10.js"><link rel="prefetch" href="/lanchao-ui/assets/js/46.c8d4ea51.js"><link rel="prefetch" href="/lanchao-ui/assets/js/47.353ba126.js"><link rel="prefetch" href="/lanchao-ui/assets/js/48.50b20ce1.js"><link rel="prefetch" href="/lanchao-ui/assets/js/49.af6395ba.js">
    <link rel="stylesheet" href="/lanchao-ui/assets/css/0.styles.52ec6c47.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lanchao-ui/" class="home-link router-link-active"><!----> <span class="site-name">lanchao-ui</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lanchao-ui/" class="nav-link">主页</a></div><div class="nav-item"><a href="/lanchao-ui/guide/cascader.html" class="nav-link">实现</a></div><div class="nav-item"><a href="https://github.com/ziwei3749/lanchao-ui/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  交流
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lanchao-ui/" class="nav-link">主页</a></div><div class="nav-item"><a href="/lanchao-ui/guide/cascader.html" class="nav-link">实现</a></div><div class="nav-item"><a href="https://github.com/ziwei3749/lanchao-ui/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  交流
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>入门</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/lanchao-ui/install/" class="sidebar-link">安装</a></li><li><a href="/lanchao-ui/get-started/" class="sidebar-link">快速上手</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>组件</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/lanchao-ui/components/button.html" class="sidebar-link">Button - 按钮</a></li><li><a href="/lanchao-ui/components/grid.html" class="sidebar-link">Grid - 网格</a></li><li><a href="/lanchao-ui/components/input.html" class="sidebar-link">Input - 输入框</a></li><li><a href="/lanchao-ui/components/layout.html" class="sidebar-link">Layout - 布局</a></li><li><a href="/lanchao-ui/components/popover.html" class="sidebar-link">Popover - 弹出框</a></li><li><a href="/lanchao-ui/components/tabs.html" class="sidebar-link">Tabs - 标签</a></li><li><a href="/lanchao-ui/components/toast.html" class="sidebar-link">Toast - 提示框</a></li><li><a href="/lanchao-ui/components/cascader.html" class="sidebar-link">Cascader - 级联</a></li><li><a href="/lanchao-ui/components/slides.html" class="sidebar-link">Slides - 轮播图</a></li><li><a href="/lanchao-ui/components/menu.html" class="sidebar-link">Menu - 导航菜单</a></li><li><a href="/lanchao-ui/components/pager.html" class="sidebar-link">Pager - 分页</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>实现</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/lanchao-ui/guide/cascader.html" class="sidebar-link">递归组件实现cascader级联组件</a></li><li><a href="/lanchao-ui/guide/slides.html" class="sidebar-link">slides的二种动画思路</a></li><li><a href="/lanchao-ui/guide/pager.html" class="active sidebar-link">分页的设计过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanchao-ui/guide/pager.html#面向接口编程" class="sidebar-link">面向接口编程</a></li><li class="sidebar-sub-header"><a href="/lanchao-ui/guide/pager.html#设计组件api" class="sidebar-link">设计组件API</a></li><li class="sidebar-sub-header"><a href="/lanchao-ui/guide/pager.html#实现分页组件的注意点" class="sidebar-link">实现分页组件的注意点</a></li><li class="sidebar-sub-header"><a href="/lanchao-ui/guide/pager.html#tdd" class="sidebar-link">TDD</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="分页的设计过程"><a href="#分页的设计过程" aria-hidden="true" class="header-anchor">#</a> 分页的设计过程</h1> <h2 id="面向接口编程"><a href="#面向接口编程" aria-hidden="true" class="header-anchor">#</a> 面向接口编程</h2> <ul><li>思考需求：想想自己平时如何使用分页器，用户一般有哪些需求</li> <li>设计接口：根据需求分析出分页需要有哪些参数，样式需要有哪些特点</li> <li>参考经典UI框架的设计方式</li></ul> <p>结合上述3点，分析出一个分页器的接口和样式</p> <ul><li>接口
<ul><li>1.接受「total-page」: 总共多少页</li> <li>2.接受「current-page」: 当前是第几页</li> <li>3.接受 change 事件</li> <li>4.接受 「hide-if-one-page」只有1页时，是否自动隐藏分页器</li> <li>5.接受 next/prev 按钮</li></ul></li> <li>样式的显示逻辑
<ul><li>1.观察得出一般的分页，必须显示的的页码。第1页、最后1页、当前页、当前页-1、当前页-2、当前页+1、当前页+2，一共7页</li> <li>2.如果总页数少于7页，就全都显示，多于7页的部分用...表示</li> <li>3.分页器的样式不能做成圆圈，因为页码位数可能无限增加的原因，可以考虑用方形、矩形或者不带边框。</li></ul></li></ul> <h2 id="设计组件api"><a href="#设计组件api" aria-hidden="true" class="header-anchor">#</a> 设计组件API</h2> <p>我觉得其实这一步，就是想象你的用户会如何调用组件</p> <p>这里我觉得page-size可以考虑不要，因为一页展示多少数据，开发人员算就行了，我分页不需要知道那么多。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>l-pager</span> <span class="token attr-name">:total-page</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:current-page.sync</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>currentPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@currentChange</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onCurrentChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>l-pager</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="实现分页组件的注意点"><a href="#实现分页组件的注意点" aria-hidden="true" class="header-anchor">#</a> 实现分页组件的注意点</h2> <ul><li>1.需要先思考清楚分页页码的显示逻辑，并做好渲染判断。</li></ul> <p>比如我这里的渲染规则就是，必须显示的的页码。第1页、最后1页、当前页、当前页-1、当前页-2、当前页+1、当前页+2，一共7页，</p> <p>其他页码用...显示,需要做好边界条件判断</p> <ul><li>2.利用.sync单项数据流，让逻辑变得更加清晰。</li></ul> <p>当用户点击「页码」或者「上一页」，组件内部做的事情十分清晰，就是通知父组件，我变了，父组件则根据当前页码重新渲染页面。</p> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token function">onClickPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> page <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>totalPage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:currentPage&quot;</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;currentChange&quot;</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 重新渲染page组件,渲染哪些页码应该是根据当前页码来决定的</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reRender</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>当然我们还可以使用计算属性来计算pages，而不是在mounted和onClickPage时调用reRender()</p> <ul><li>这样初次页面渲染时，pages会将render watcher作为依赖收集，同时读取计算属性pages，还会触发内部totalPage等属性的getter，于是这些属性把computed watcher作为依赖收集</li> <li>将来当totalPage或者currentPage发生变化时，compted watcher的update就会被触发，如果新旧值发生变化，就computed watcher会调用notify()，通知render watcher调用自己的update方法更新视图</li></ul> <p>这样可以很好的利用计算属性惰性求值</p> <h2 id="tdd"><a href="#tdd" aria-hidden="true" class="header-anchor">#</a> TDD</h2> <p>分页组件的单元测试，还是常规思路</p> <ul><li>构造一个分页组件，传递propData，测试样式和数据是否正常</li> <li>模仿点击事件，测试是否可以触发change事件，并且得到当前页码</li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/lanchao-ui/guide/slides.html" class="prev">
          slides的二种动画思路
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/lanchao-ui/assets/js/45.52a9c593.js" defer></script><script src="/lanchao-ui/assets/js/app.69a055d6.js" defer></script>
  </body>
</html>
